<div class="modal-header aside-panel-header" id="editUserPanelHeader">
    <h3 class="modal-title">My Account</h3>
</div>
<div class="modal-body" id="editUserPanelBody" nv-file-drop="" uploader="uploader">
    <div class="form-container" id="form-container"
         window-resize header="editUserPanelHeader" body="editUserPanelBody" footer="editUserPanelFooter">
        <div class="row user-details">
            <uib-tabset justified="true">
                <uib-tab heading="Details" ng-click="selectForm(this.userForm)" >
                    <form class="form form-instance" role="form" name="userForm" ng-init="setFormScope(this)" ng-show ="!isUploadAvatar" novalidate>
                        <div class="col-xs-6">
                            <div class="form-group" show-errors>
                                <label for="screenNameInput" class="control-label">Screen Name (Required)</label>
                                <input ng-model="user.screenName" name="screenName" class="form-control" id="screenNameInput" placeholder="Screen Name" ng-minlength="3" ng-maxlength="32" required>
                                <p class="help-block" ng-if="userForm.screenName.$error.minlength">Min length is invalid</p>
                                <p class="help-block" ng-if="userForm.screenName.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userForm.screenName.$error.serverMessage">{{userForm.screenName.$error.serverMessage}}</p>
                            </div>
                            <div class="form-group" show-errors>
                                <label for="usernameInput" class="control-label">Email Address (Required)</label>
                                <input ng-model="user.username" type="email" name="username" class="form-control" id="usernameInput" placeholder="Username" ng-minlength="3" ng-maxlength="32" required>
                                <p class="help-block" ng-if="userForm.username.$error.minlength">Min length is invalid</p>
                                <p class="help-block" ng-if="userForm.username.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userForm.username.$error.email">The email address is invalid</p>
                                <p class="help-block" ng-if="userForm.username.$error.serverMessage">{{userForm.username.$error.serverMessage}}</p>
                            </div>
                            <div class="form-group" show-errors>
                                <label for="firstNameInput" class="control-label">First Name (Required)</label>
                                <input ng-model="user.firstName" type="text" name="firstName" class="form-control" id="firstNameInput" placeholder="First Name" required>
                                <p class="help-block" ng-if="userForm.firstName.$error.minlength">Min length is invalid</p>
                                <p class="help-block" ng-if="userForm.firstName.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userForm.firstName.$error.serverMessage">{{userForm.firstName.$error.serverMessage}}</p>
                            </div>
                            <div class="form-group" show-errors>
                                <label for="middleNameInput" class="control-label">Middle Name</label>
                                <input ng-model="user.middleName" type="text" name="middleName" class="form-control" id="middleNameInput" placeholder="Middle Name">
                                <p class="help-block" ng-if="userForm.middleName.$error.minlength">Min length is invalid</p>
                                <p class="help-block" ng-if="userForm.middleName.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userForm.middleName.$error.serverMessage">{{userForm.middleName.$error.serverMessage}}</p>
                            </div>
                            <div class="form-group" show-errors>
                                <label for="lastNameInput" class="control-label">Last Name</label>
                                <input ng-model="user.lastName" type="text" name="lastName" class="form-control" id="lastNameInput" placeholder="Last Name">
                                <p class="help-block" ng-if="userForm.lastName.$error.minlength">Min length is invalid</p>
                                <p class="help-block" ng-if="userForm.lastName.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userForm.lastName.$error.serverMessage">{{userForm.lastName.$error.serverMessage}}</p>
                            </div>
                            <div class="form-group" show-errors>
                                <label for="jobTitleInput" class="control-label">Job Title</label>
                                <input ng-model="user.jobTitle" type="text" name="jobTitle" class="form-control" id="jobTitleInput" placeholder="Job Title">
                                <p class="help-block" ng-if="userForm.jobTitle.$error.minlength">Min length is invalid</p>
                                <p class="help-block" ng-if="userForm.jobTitle.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userForm.jobTitle.$error.serverMessage">{{userForm.jobTitle.$error.serverMessage}}</p>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <div>
                                    <img class="avatar" ng-src="{{avatarUrl}}" >
                                <div>
                                    <a href="#" ng-click="showUploadContent()"><i class="fa fa-pencil-square-o"></i>Change</a>
                                </div>
                            </div>
                            <div class="form-group user-id">
                                <label for="userId">User ID</label>
                                <div id="userId">
                                    <span>{{user.id}}</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="birthday">Birthday</label>
                                <div class="input-group birthday">
                                    <input id="birthday" name="birthday" type="date" class="form-control" uib-datepicker-popup ng-model="user.birthday" is-open="status.opened" close-text="Close" />
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event)"><i class="fa fa-calendar"></i></button>
                                </span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="gender">Gender</label>
                                <div>
                                    <select class="form-control" id="gender" name="gender" ng-model="user.gender">
                                        <option ng-value="{{userGender[0]}}">{{userGender[0]}}</option>
                                        <option ng-value="{{userGender[1]}}">{{userGender[1]}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        </div>
                    </form>
                    <div class="col-xs-12 uploader" ng-show="isUploadAvatar">
                        <h2>Avatar uploader</h2>
                        <div ng-show="uploader.isHTML5">
                            <div class="" ng-if="uploader.queue[0] != undefined" ng-thumb="{ file: uploader.queue[0]._file, height: 150 }"></div>
                        </div>
                        <div class="well my-drop-zone">

                        </div>

                        <div>
                           <input type="file" nv-file-select="" uploader="uploader" /><br/>
                            <div>
                                Upload progress:
                                <div class="progress" style="">
                                    <div class="progress-bar" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
                                </div>
                            </div>
                       </div>
                    </div>
                </uib-tab>
                <uib-tab heading="Password" ng-click="selectForm(this.userChangePasswordForm)">
                    <form class="form form-instance" role="form" name="userChangePasswordForm" novalidate>
                        <div class="col-xs-12">
                            <div class="form-group" show-errors>
                                <label for="currentPasswordInput" class="control-label">Current Password (Required)</label>
                                <input ng-model="password.currentPassword" type="password" name="currentPassword" class="form-control" id="currentPasswordInput" placeholder="Current Password" required>
                                <p class="help-block" ng-if="userChangePasswordForm.currentPassword.$error.serverMessage">{{userChangePasswordForm.currentPassword.$error.serverMessage}}</p>
                            </div>
                            <div class="form-group" show-errors>
                                <label for="newPasswordInput" class="control-label">New Password (Required)</label>
                                <input ng-model="password.newPassword" type="password" name="newPassword" class="form-control" id="newPasswordInput" placeholder="New Password" required ng-maxlength="60">
                                <p class="help-block" ng-if="userChangePasswordForm.newPassword.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userChangePasswordForm.newPassword.$error.serverMessage">{{userChangePasswordForm.newPassword.$error.serverMessage}}</p>
                            </div>
                            <div class="form-group" show-errors>
                                <label for="retypeNewPasswordInput" class="control-label">Retype New Password (Required)</label>
                                <input ng-model="password.retypeNewPassword" type="password" name="retypeNewPassword" class="form-control" id="retypeNewPasswordInput" placeholder="Retype New Password" required
                                       password-verify="password.newPassword" ng-maxlength="60">
                                <p class="help-block" ng-if="userChangePasswordForm.retypePassword.$error.passwordVerify">Must match the previous entry</p>
                                <p class="help-block" ng-if="userChangePasswordForm.retypePassword.$error.maxlength">Max length is invalid</p>
                                <p class="help-block" ng-if="userChangePasswordForm.retypePassword.$error.serverMessage">{{userChangePasswordForm.retypeNewPasswordInput.$error.serverMessage}}</p>
                            </div>
                        </div>
                    </form>
                </uib-tab>
                <uib-tab heading="Roles">
                    <form class="form form-instance" ng-repeat="role in user.roles" ng-init="show=false;">
                        <div class="roles">
                            <span class="name" ng-click="show=!show"> <a class="fa" ng-class="{'fa-plus':!show, 'fa-minus':show}" ></a> {{role.name}} </span>
                            <ul ng-class="{clicked:show}" class="list" ng-show="show">
                                <li ng-repeat="permission in role.permissions">{{permission.description}}</li>
                            </ul>
                        </div>
                    </form>
                </uib-tab>
            </uib-tabset>
        </div>
    </div>
</div>
<div class="modal-footer aside-panel-footer" id="editUserPanelFooter">
    <div class="row bottom-navigation">
        <div class="col-sx-12 bottom-navigation-content" ng-show="!isUploadAvatar">
            <a class="btn save-button" ng-click="saveForm()" ng-disabled="selectedForm.$invalid"><i class="fa fa-floppy-o"></i><span>&nbsp;Save</span></a>
            <a class="btn cancel-button" ng-click="cancel()"><i class="fa fa-times"></i><span>&nbsp;Cancel</span></a>
        </div>
        <div class="col-sx-12 bottom-navigation-content" ng-show="isUploadAvatar">
            <a class="btn save-button" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"><i class="fa fa-floppy-o"></i><span>&nbsp;Upload</span></a>
            <a class="btn cancel-button" ng-click="uploader.cancelAll();hideUploadContent()"><i class="fa fa-times"></i><span>&nbsp;Cancel</span></a>
        </div>
    </div>
</div>
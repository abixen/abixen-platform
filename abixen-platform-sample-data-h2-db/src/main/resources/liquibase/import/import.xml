<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd"
        logicalFilePath="liquibase/import/import.xml">

    <property name="databaseConnectionFile" value="database-connection-h2" dbms="h2"/>
    <property name="databaseConnectionFile" value="database-connection-postgres" dbms="postgresql"/>
    <property name="databaseConnectionFile" value="database-connection-mysql" dbms="mysql"/>
    <property name="databaseConnectionFile" value="database-connection-oracle" dbms="oracle"/>
    <property name="databaseConnectionFile" value="database-connection-mssql" dbms="mssql"/>

    <changeSet author="KonradWisniewski" id="import-v1" runAlways="false" runOnChange="true">

        <preConditions onFail="HALT">
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_selling_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_cash_flow_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_multi_visualisation_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_visualisation_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_something_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_chart_visualisation_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_sales_in_stores_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_sales_in_stores_global_data</sqlCheck>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM sample_sales_per_employers_data</sqlCheck>
        </preConditions>

        <loadData file="liquibase/import/data/sample-selling-data.csv"
                  separator=";"
                  tableName="sample_selling_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-cash-flow-data.csv"
                  separator=";"
                  tableName="sample_cash_flow_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-visualisation-data.csv"
                  separator=";"
                  tableName="sample_visualisation_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-multi-visualisation-data.csv"
                  separator=";"
                  tableName="sample_multi_visualisation_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-something-data.csv"
                  separator=";"
                  tableName="sample_something_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-chart-visualisation-data.csv"
                  separator=";"
                  tableName="sample_chart_visualisation_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-sales-in-store-data.csv"
                  separator=";"
                  tableName="sample_sales_in_stores_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-sales-in-stores-global-data.csv"
                  separator=";"
                  tableName="sample_sales_in_stores_global_data">
        </loadData>
        <loadData file="liquibase/import/data/sample-sales-per-employers-data.csv"
                  separator=";"
                  tableName="sample_sales_per_employers_data">
        </loadData>
    </changeSet>
</databaseChangeLog>